services:
  authentication_service:
    image: betterme_auth_service:1.0
    depends_on:
      mongodb_service:
        condition: service_started
    ports:
      - "6968:6968"
    networks:
      internal:
        ipv4_address: 172.16.0.1

  users_service:
    image: betterme_users_service:1.0
    depends_on:
      mongodb_service:
        condition: service_started
    ports:
      - "6969:6969"
    networks:
      internal:
        ipv4_address: 172.16.0.2

  verification_requests_service:
    image: betterme_verifications_service:1.0
    depends_on:
      mongodb_service:
        condition: service_started
    ports:
      - "6970:6970"
    volumes:
      - verification_documents:/app/src/uploads
    networks:
      internal:
        ipv4_address: 172.16.0.3

  email_service:
    image: betterme_email_service:1.0
    depends_on:
      mongodb_service:
        condition: service_started
      users_service:
        condition: service_started
    ports:
      - "6971:6971"
    networks:
      internal:
        ipv4_address: 172.16.0.4

  reports_service:
    image: betterme_reports_service:1.0
    depends_on:
      mongodb_service:
        condition: service_started
    ports:
      - "6972:6972"
    networks:
      internal:
        ipv4_address: 172.16.0.5

#   stats_service:
#     image: betterme_stats_service:1.0
#     depends_on:
#       mongodb_service:
#         condition: service_started
#     ports:
#       - "6973:6973"
#    networks:
#       internal:
#         ipv4_address: 172.16.0.6

  posts_service:
    image: betterme_posts_service:1.0
    depends_on:
      mongodb_service:
        condition: service_started
    ports:
      - "6974:8080"
    networks:
      internal:
        ipv4_address: 172.16.0.7

#  multimedia_service:

  mongodb_service:
    image: mongo
    restart: always
    volumes:
      - mongodb:/data/db
    networks:
      internal:
        ipv4_address: 172.16.0.9

volumes:  
    mongodb:
    verification_documents:

networks:
  internal:
    ipam:
      config:
        - subnet: 172.16.0.0/16
          gateway: 172.16.0.254